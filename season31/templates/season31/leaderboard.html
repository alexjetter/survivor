{% load staticfiles %}

<link rel="stylesheet" type="text/css" href="{% static 'season31/style.css' %}" />

<table class="noborder"><tr>

	<td class="menu noborder texttop">
		{% include "season31/menu.html" %}
	</td>
	<td class="content textcenter noborder texttop textleft">

		<div class="font32 textbold">Leaderboard</div>
		<div class="font24 fggrey margneg4">{{ latestepisode }}</div>
		
		{% if latestepisode %}
		
		<div class="halfspacer"></div>
		
		
		<div class="inline textleft">
			<div class="margneg2">
				<div class="inline width192 bglightgrey rounded textright padlr4 padtb0">Top Castaway Score</div>
				<div class="inline width24 bgdarkgrey roundleft textright fggreen4 padlr4 padtb0 marglrneg3">{{ simpleepisodestats.topcastawayscore }}</div>
				<div class="inline width48 bgdarkgrey roundright textleft fggrey padlr4 padtb0 marglrneg3">Points</div>
				<div class="inline margneg2">
					{% for sp in simpleepisodestats.topcastawayscorers %}
					<div class="inline padlr4 padtb0 rounded bg{{ sp.color }}"><a href="{% url 'season31:castaway' sp.id %}">{{ sp.name }}</a></div>
					{% endfor %}
				</div>
			</div>
			<div class="margneg2">
				<div class="inline width192 bglightgrey rounded textright padlr4 padtb0">Most Picked for Teams</div>
				<div class="inline width24 bgdarkgrey roundleft textright fggreen4 padlr4 padtb0 marglrneg3">{{ simpleepisodestats.mostteamcastawaycount }}</div>
				<div class="inline width48 bgdarkgrey roundright textleft fggrey padlr4 padtb0 marglrneg3">Teams</div>
				<div class="inline margneg2">
					{% for sp in simpleepisodestats.mostteamcastaways %}
					<div class="inline padlr4 padtb0 rounded bg{{ sp.color }}"><a href="{% url 'season31:castaway' sp.id %}">{{ sp.name }}</a></div>
					{% endfor %}
				</div>
			</div>
			<div class="margneg2">
				<div class="inline width192 bglightgrey rounded textright padlr4 padtb0">Most Predicted Vote-Off</div>
				<div class="inline width24 bgdarkgrey roundleft textright fgred4 padlr4 padtb0 marglrneg3">{{ simpleepisodestats.mostvotecastawaycount }}</div>
				<div class="inline width48 bgdarkgrey roundright textleft fggrey padlr4 padtb0 marglrneg3">Picks</div>
				<div class="inline margneg2">
					{% for sp in simpleepisodestats.mostvotecastaways %}
					<div class="inline padlr4 padtb0 rounded bg{{ sp.color }}"><a href="{% url 'season31:castaway' sp.id %}">{{ sp.name }}</a></div>
					{% endfor %}
				</div>
			</div>
			<div class="margneg2">
				<div class="inline width192 bglightgrey rounded textright padlr4 padtb0">Top Player Score</div>
				<div class="inline width24 bgdarkgrey roundleft textright fggreen4 padlr4 padtb0 marglrneg3">{{ simpleepisodestats.topplayerscore }}</div>
				<div class="inline width48 bgdarkgrey roundright textleft fggrey padlr4 padtb0 marglrneg3">Points</div>
				<div class="inline margneg2">
					{% for sp in simpleepisodestats.topplayerscorers %}
					<div class="inline padlr4 padtb0 rounded bgblack"><a href="{% url 'season31:player' sp.id %}" class="fgwhite">{{ sp.name }}</a></div>
					{% endfor %}
				</div>
			</div>
			{% if simpleepisodestats.topplayermovement > 0 %}
			<div class="margneg2">
				<div class="inline width192 bglightgrey rounded textright padlr4 padtb0">Most Spots Climbed</div>
				<div class="inline width24 bgdarkgrey roundleft textright fggreen4 padlr4 padtb0 marglrneg3">+{{ simpleepisodestats.topplayermovement }}</div>
				<div class="inline width48 bgdarkgrey roundright textleft fggrey padlr4 padtb0 marglrneg3">Places</div>
				<div class="inline margneg2">
					{% for sp in simpleepisodestats.topplayermovers %}
					<div class="inline padlr4 padtb0 rounded bgblack"><a href="{% url 'season31:player' sp.id %}" class="fgwhite">{{ sp.name }}</a></div>
					{% endfor %}
				</div>
			</div>
			{% endif %}
			<div class="margneg2">
				<div class="inline width192 bglightgrey rounded textright padlr4 padtb0">Correct Vote Predictions</div>
				<div class="inline width24 bgdarkgrey roundleft textright fggreen4 padlr4 padtb0 marglrneg3">{{ simpleepisodestats.correctpredictions }}</div>
				<div class="inline width48 bgdarkgrey roundright textleft fggrey padlr4 padtb0 marglrneg3">Seers</div>
			</div>
		</div>
		
		{% endif %}
		
		<div class="halfspacer"></div>
		
		<div class="inline rounded pad2 bgdarkgrey datashow">
			<div class="pad0">
				<div class="pad0 bgblack rounded marg1">
					<div class="datahide padlr2 width32  fglightgrey">±</div>
					<div class="inline   padlr4 width48  fglightgrey">Plc</div>
					<div class="inline   padlr8 width256 fglightgrey">Player</div>
					<div class="inline   padlr4 width48  fglightgrey">Pts</div>
					<div class="datahide padlr2 width32  fglightgrey">Δ</div>
				</div>
			</div>
			{% for spe in simpleplayerepisodes %}
			<div class="pad0">
				<div class="pad0 bgblack rounded marg1 teamshow">
					<div class="pad0">
						<div class="datahide padlr2 width32  {% if spe.movement > 0 %} fggreen5{% elif spe.movement < 0 %} fgred5{% endif%}">{% if spe.movement > 0 %}+{% endif %}{{ spe.movement }}</div>
						<div class="inline   padlr4 width48  bgwhite roundleft">{{ spe.place }}</div>
						<div class="inline   padlr8 width256 fgwhite textleft">
							<a href="{% url 'season31:player' spe.playerid %}" class="fgwhite">{{ spe.playername }}</a>
							{% if spe.vote_off_score > 0 and latestepisode.is_locked%}
							<img src="{% static 'season31/images/icons/'%}CorrectVote.png" class="actionsmall marglr4" title="Correctly Predicted Vote" />
							{% endif %}
						</div>
						<div class="inline   padlr4 width48  bgwhite roundright">{{ spe.total_score }}</div>
						<div class="datahide padlr2 width32  {% if spe.score_delta < 0 %} fgdelta{% endif %}">{{ spe.score_delta }}</div>
					</div>
					{% if latestepisode.is_locked %}
					<div class="pad4 teamhide textleft" id="{{spe.playername}}">
						{% for sp in spe.tpicks %}
						<div class="inline padlr8 marglrneg1 rounded bg{{sp.color}}">
							<a href="{% url 'season31:castaway' sp.id %}">{{ sp.name }}</a>
						</div>
						{% endfor %}
					</div>
					{% endif %}
				</div>
			</div>
			{% endfor %}
		</div>
	</td>
	{% if user.is_superuser  %}
	<td class="bgadmin noborder texttop">

		<div class="bgwhite pad4 marg4">
			<form action="{% url 'season31:addepisode' %}" method="post">
				{% csrf_token %}
				<div>
					<input type="number" name="teamsize" id="teamsize" min="2" max="10" value="{{ latestepisode.team_size }}" />
					<label for="teamsize">Team Size</label>
				</div>
				<input type="submit" class="width100" value="Add Episode" />
			</form>
		</div>
		<div class="bgwhite pad4 marg4">
			<form action="{% url 'season31:backfillteams' %}" method="post">
				{% csrf_token %}
				<input type="submit" class="width100" value="Backfill Teams" />
			</form>
		</div>
		<div class="bgwhite pad4 marg4">
			<form action="{% url 'season31:tallyalljsps' %}" method="post">
				{% csrf_token %}
				<input type="submit" class="width100" value="Tally All JSPs" />
			</form>
		</div>
		<div class="bgwhite pad4 marg4">
			<form action="{% url 'season31:updatescores' %}" method="post">
				{% csrf_token %}
				<input type="submit" class="width100" value="Recalculate All Scores" />
			</form>
		</div>
	</td>
	{% endif %}
	
</tr></table>